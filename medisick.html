<!--
병 카드 클릭 시 질병에 따라 예방법 안내 기능 추가 (API 사용 ex. https://www.data.go.kr/data/15087442/openapi.do, https://www.kdca.go.kr/npt/biz/npp/api/nppOpenApiIntrMain.do)
가장 조심해야 하는 질병의 감염자 수 차트 기능 추가 (chart.js)
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link rel="shortcut icon" href="favicon.png" />

    <meta name="description" content="" />
    <meta name="keywords" content="" />

    <meta
      http-equiv="Content-Security-Policy"
      content="upgrade-insecure-requests"
    />

    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=KoHo:wght@400;600;700&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="fonts/icomoon/style.css" />
    <link rel="stylesheet" href="fonts/flaticon/font/flaticon.css" />

    <link rel="stylesheet" href="css/tiny-slider.css" />
    <link rel="stylesheet" href="css/aos.css" />
    <link rel="stylesheet" href="css/flatpickr.min.css" />
    <link rel="stylesheet" href="css/glightbox.min.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/table.css" />

    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

    <title>군 감염병 정보</title>
  </head>
  <body>
    <div class="site-mobile-menu site-navbar-target">
      <div class="site-mobile-menu-header">
        <div class="site-mobile-menu-close">
          <span class="icofont-close js-menu-toggle"></span>
        </div>
      </div>
      <div class="site-mobile-menu-body"></div>
    </div>

    <nav class="site-nav position-absolute mt-3 clearfix">
      <div class="container">
        <div class="site-navigation">
          <a
            href="index.html"
            class="logo m-0 float-start text-white"
            style="font-family: 'CWDangamAsac-Bold'; font-size: 35px"
            >밀리</a
          >

          <ul
            class="js-clone-nav d-none d-lg-inline-block text-start site-menu float-start"
          >
            <li class="active">
              <a href="index.html" class="text-white">메인</a>
            </li>
            <li class="has-children">
              <a href="eatsmain.html" class="text-white">군 식단 정보</a>
              <ul class="dropdown">
                <li><a href="eatspx.html">PX 인기상품</a></li>
                <li><a href="eatsatc.html">육군훈련소 식단 정보</a></li>
                <li><a href="eatsbsj.html">부대별 식단 정보</a></li>
              </ul>
            </li>
            <li class="has-children">
              <a href="restmain.html" class="text-white">병사 휴양 정보</a>
              <ul class="dropdown">
                <li><a href="restsail.html">병사 할인 혜택</a></li>
                <li><a href="restplace.html">군 휴양시설 운영 정보</a></li>
                <li><a href="resttmo.html">TMO(여행장병 안내소)</a></li>
              </ul>
            </li>
            <li class="has-children">
              <a href="medimain.html" class="text-white">의료 정보</a>
              <ul class="dropdown">
                <li><a href="medisick.html">군 감염병 정보</a></li>
                <li><a href="medihos.html">군 병원 정보</a></li>
              </ul>
            </li>
            <li>
              <a href="communitypost.html" class="text-white">공지사항</a>
            </li>
            <li>
              <a href="communityfm.html" class="text-white">군인 커뮤니티</a>
            </li>
            <li>
              <a
                href="#"
                class="text-white"
                onclick='
                swal({
                  title: "포인트 순위는 준비중이에요. 조금만 기다려주세요!",
                  icon:"info",
                  });
                '
                >포인트 순위</a
              >
            </li>
            <!-- href="pointrank.html" -->
            <!--  -->
            <li><a href="mypage.html" class="text-white">마이페이지</a></li>
            <!--  -->
            <li><a href="militools.html" class="text-white">밀리포유</a></li>
          </ul>

          <ul
            class="js-clone-nav d-none d-lg-inline-block text-end site-menu float-end"
          >
            <li class="hw-button">
              <a href="contact.html">우크라이나 후원</a>
            </li>
          </ul>
          <a
            href="#"
            class="burger ms-auto float-end site-menu-toggle js-menu-toggle d-inline-block d-lg-none"
            data-toggle="collapse"
            data-target="#main-navbar"
          >
            <span></span>
          </a>
        </div>
      </div>
    </nav>

    <div
      class="hero hero-bg overlay inner bg-light"
      style="background-image: url('images/military-word-banner.jpg')"
    >
      <div class="container">
        <div class="row align-items-center">
          <div class="col-lg-5 h-100">
            <div class="masthead" data-aos="fade-up" data-aos-delay="">
              <h1 class="text-white">군 감염병 정보</h1>
              <!-- <p class="mb-5 text-light-opacity-50">
                오늘 밥은 뭐지? 육군 훈련소 식단 및 PX 인기상품, 부대별 식단
                정보를 알아보세요.
              </p> -->
              <!-- <p>
                <a href="#" class="btn btn-primary me-4">Get in touch</a>
                <a href="#">Learn more</a>
              </p> -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="section section-2">
      <div class="container">
        <div class="row align-items-center">
          <div>
            <span class="subheading">예방접종의 필요성</span>
            <div class="row g-5">
              <p style="font-size: 20px">
                예방접종은 감염병 예방에 가장 효과적이고 안전한 공중보건 중재
                수단으로 그 동안 국가 예방접종사업을 통해 예방접종 대상 감염병의
                발생 빈도는 현저히 감소하게 되었습니다. 지금까지 국가는 영유아를
                중심으로 예방접종 사업을 적극적으로 추진하였으나 상대적으로 성인
                예방접종에 대해서는 적극적이지 못했습니다. 최근 건강에 대한
                관심이 고조되면서 성인 예방접종 분야에 대한 관심 역시 증가하고
                있고, 만성질환자 및 면역저하자 증가, 예방접종 후 시간 경과에
                따른 면역력 저하, 감염병 유행역학의 변화, 해외여행 및 특수직업
                종사로 인한 감염병 노출 위험 증가, 신규 백신 개발 증가와 같은
                이유로 성인 예방접종의 필요성이 제기되고 있습니다. 자신에게
                필요한 백신에 대해 알아보고
                <a href="https://nip.kdca.go.kr/irgd/index.html" target="_blank"
                  >예방접종</a
                >을 하세요.
              </p>
              <p>
                출처:
                <a
                  href="http://www.nrc.go.kr/portal/html/content.do?depth=ph&menu_cd=03_01_00_01"
                  target="_blank"
                  >보건복지부 국립재활원</a
                >
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="section section-2">
      <div class="container">
        <div class="row align-items-center">
          <div>
            <span class="subheading">가장 조심해야 하는 질병</span>
            <div class="row g-5" id="danger"></div>
          </div>
        </div>
      </div>
    </div>

    <div class="section section-2">
      <div class="container">
        <div class="row align-items-center">
          <div>
            <span class="subheading">군 감염병 정보</span>
            <div class="row g-5" id="content"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- 경계 -->
    <div class="site-footer">
      <div class="container">
  
        <div class="row">
          <div class="col-lg-4">
            <div class="widget">
              <h3>저작권</h3>
              <p>이 서비스는 국방부가 제공하는 공공데이터를 활용해 개발되었습니다.</p>
            </div> <!-- /.widget -->
            <div class="widget">
              <h3>SNS</h3>
              <ul class="list-unstyled social">
                <li><a><span class="icon-instagram" style="cursor: pointer;" onclick='
                swal({
                  title: "아직은 해당 기능을 제공하지 않아요.",
                  icon:"error",
                  });'></span></a></li>
                <li><a><span class="icon-twitter" style="cursor: pointer;" onclick='
                  swal({
                    title: "아직은 해당 기능을 제공하지 않아요.",
                    icon:"error",
                    });'></span></a></li>
                <li><a><span class="icon-facebook" style="cursor: pointer;" onclick='
                  swal({
                    title: "아직은 해당 기능을 제공하지 않아요.",
                    icon:"error",
                    });'></span></a></li>
                <li><a><span class="icon-linkedin" style="cursor: pointer;" onclick='
                  swal({
                    title: "아직은 해당 기능을 제공하지 않아요.",
                    icon:"error",
                    });'></span></a></li>
                <li><a><span class="icon-pinterest" style="cursor: pointer;" onclick='
                  swal({
                    title: "아직은 해당 기능을 제공하지 않아요.",
                    icon:"error",
                    });'></span></a></li>
                <li><a><span class="icon-dribbble" style="cursor: pointer;" onclick='
                  swal({
                    title: "아직은 해당 기능을 제공하지 않아요.",
                    icon:"error",
                    });'></span></a></li>
              </ul>
            </div>
          </div>
  
          <div class="col-lg-2 ml-auto">
            <div class="widget">
              <h3>개발자</h3>
              <ul class="list-unstyled float-left links">
                <li><a href="mailto:choehw1130@naver.com">최현우</a></li>
              </ul>
            </div> <!-- /.widget -->
          </div> <!-- /.col-lg-3 -->
  
          <div class="col-lg-2">
            <div class="widget">
              <h3>저작물 제공</h3>
              <ul class="list-unstyled float-left links">
                <li><a href="https://www.mnd.go.kr/">국방부</a></li>
                <li><a href="https://data.mnd.go.kr/">국방부 공공데이터포털</a></li>
              </ul>
            </div> <!-- /.widget -->
          </div> <!-- /.col-lg-3 -->
  
  
          <div class="col-lg-3">
            <div class="widget">
              <h3>개발자 연락처</h3>
              <ul class="list-unstyled links mb-4">
                <li><a href="tel://0109186970">010-7918-6970</a></li>
                <li><a href="mailto:choehw1130@naver.com">choehw1130@naver.com</a></li>
              </ul>
            </div> <!-- /.widget -->
          </div> <!-- /.col-lg-3 -->
  
        </div> <!-- /.row -->
  
        <div class="row mt-5">
          <div class="col-12 text-center">
            <p>&copy;2022.최현우 All Rights Reserved.</a>
            </p>
  
          </div>
        </div>
      </div> <!-- /.container -->
    </div> <!-- /.site-footer -->

    <!-- Preloader -->
    <div id="overlayer"></div>
    <div class="loader">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>

    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/tiny-slider.js"></script>
    <script src="js/aos.js"></script>
    <script src="js/whitenavbar.js"></script>
    <script src="js/counter.js"></script>
    <script src="js/flatpickr.js"></script>
    <script src="js/glightbox.min.js"></script>
    <script src="js/custom.js"></script>
    <script src="js/point.js"></script>
    <script
      src="https://code.jquery.com/jquery-3.6.0.js"
      integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
      crossorigin="anonymous"
    ></script>
    <script>
      $.ajax({
        method: 'GET',
        url: 'https://openapi.mnd.go.kr/3739313636353531383532353032313138/json/DS_MND_IFCTNCMSLD_PRSTS/1/5000/',
        data: '',
        dataType: 'jsonp',
      }).done(function (msg) {
        for (let i = 0; i < msg.DS_MND_IFCTNCMSLD_PRSTS.list_total_count; i++) {
          let qtrdvsToMonth = '정보 없음';
          if (
            msg.DS_MND_IFCTNCMSLD_PRSTS.row[i]['prsts'] !== '0' &&
            msg.DS_MND_IFCTNCMSLD_PRSTS.row[i]['years'] >= '2019'
          ) {
            if (msg.DS_MND_IFCTNCMSLD_PRSTS.row[i]['qtrdvs'] === '1') {
              qtrdvsToMonth = '1분기(1월, 2월, 3월)';
            } else if (msg.DS_MND_IFCTNCMSLD_PRSTS.row[i]['qtrdvs'] === '2') {
              qtrdvsToMonth = '2분기(4월, 5월, 6월)';
            } else if (msg.DS_MND_IFCTNCMSLD_PRSTS.row[i]['qtrdvs'] === '3') {
              qtrdvsToMonth = '3분기(7월, 8월, 9월)';
            } else if (msg.DS_MND_IFCTNCMSLD_PRSTS.row[i]['qtrdvs'] === '4') {
              qtrdvsToMonth = '4분기(10월, 11월, 12월)';
            }
            $('div.row.g-5#content').prepend(`
            <div class="col-lg-4" data-aos="fade-up" data-aos-delay="">
              <div class="feature-1 d-block">
                <div class="mb-3">
                  <h2 style="font-weight: bold;">${msg.DS_MND_IFCTNCMSLD_PRSTS.row[i]['sicknsnm']}</h2>
                </div>
                <div>
                  <h3>현황: ${msg.DS_MND_IFCTNCMSLD_PRSTS.row[i]['prsts']}명</h3>
                  <h3>${msg.DS_MND_IFCTNCMSLD_PRSTS.row[i]['years']}년 ${qtrdvsToMonth}</h3>
                </div>
              </div>
            </div>
          `);
          }
        }
        console.log(msg);
        const dngr = {};
        for (let i = 1; i < msg.DS_MND_IFCTNCMSLD_PRSTS.list_total_count; i++) {
          if (
            msg.DS_MND_IFCTNCMSLD_PRSTS.row[
              msg.DS_MND_IFCTNCMSLD_PRSTS.list_total_count - i
            ]['prsts'] !== '0' &&
            msg.DS_MND_IFCTNCMSLD_PRSTS.row[
              msg.DS_MND_IFCTNCMSLD_PRSTS.list_total_count - i
            ]['years'] === `${new Date().getFullYear() - 1}`
          ) {
            dngr[msg.DS_MND_IFCTNCMSLD_PRSTS.list_total_count - i] =
              msg.DS_MND_IFCTNCMSLD_PRSTS.row[
                msg.DS_MND_IFCTNCMSLD_PRSTS.list_total_count - i
              ]['prsts'];
          }
        }
        const dngrarr = [];
        for (let i = 0; i < Object.keys(dngr).length; i++) {
          dngrarr.push(dngr[Object.keys(dngr)[i]]);
        }
        dngrarr.sort(function (a, b) {
          return a - b;
        });
        dngrarr.reverse();
        console.log(dngr);
        console.log(dngrarr);
        $('div.row.g-5#danger').prepend(`
            <div class="col-lg-4" data-aos="fade-up" data-aos-delay="">
              <div class="feature-1 d-block">
                <div class="mb-3">
                  <h2 style="font-weight: bold;">${
                    msg.DS_MND_IFCTNCMSLD_PRSTS.row[
                      Object.keys(dngr).find((key) => dngr[key] === dngrarr[0])
                    ]['sicknsnm']
                  }</h2>
                </div>
                <div>
                  <h3 style="color:red">현황: ${
                    msg.DS_MND_IFCTNCMSLD_PRSTS.row[
                      Object.keys(dngr).find((key) => dngr[key] === dngrarr[0])
                    ]['prsts']
                  }명</h3>
                  <h3>조심하세요. 최신 데이터를 기반으로 감염된 사람이 가장 많은 질병이에요.</h3>
                </div>
              </div>
            </div>
          `);
        // 정렬 이후 제일 큰 숫자 번째 항목의 병명 가져와서 #div.row.g-5#danger에 append하기
      });
    </script>
  </body>
</html>
